name: ðŸš€ Build and Deploy File to cPanel
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      - uses: pnpm/action-setup@v2
        with:
          version: 7.9.3
      - run: pnpm i
      - run: pnpm lib build
      - name: save build artifact
        uses: actions/upload-artifact@v3
        with:
          name: dist
          path: ./frontend/dist
  # FTP-Deploy-Action:
  #   name: ðŸŽ‰ Deploy
  #   runs-on: ubuntu-latest

  #   steps:
  #     - name: ðŸšš Get latest code
  #       uses: actions/checkout@v3
  #       with:
  #         fetch-depth: 2

  #     - name: Use Node.js 18.8
  #       uses: actions/setup-node@v3
  #       with:
  #         node-version: '18.8'

  #     - name: Cache npm dependencies
  #       uses: actions/cache@v3
  #       id: cache-node-modules
  #       with:
  #         path: '**/node_modules'
  #         key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}

  #     - name: ðŸ”¨ Install Dependencies
  #       if: steps.npm-cache.outputs.cache-hit != 'true'
  #       run: |
  #         npm install
  #         git reset --hard
  #     - name: ðŸ“‚ Sync folders and files to the server
  #       uses: SamKirkland/FTP-Deploy-Action@4.3.3
  #       with:
  #         server: ${{ secrets.FTP_SERVER }}
  #         username: ${{ secrets.FTP_USERNAME }}
  #         password: ${{ secrets.FTP_PASSWORD }}
